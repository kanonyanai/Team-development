<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="utf-8">
    <title>Placeサーチ</title>
    <style>
        #header {
            background-color: darkblue;
            padding: 3px;
            width: 1195px;
            font-family: Meriyo UI;
            font-size: 14px;
            color: white;
        }

        #map {
            width: 1200px;
            height: 700px;
        }
    </style>
</head>

<body>
    <div id="header"><b>Google Maps検索機能</b></div>
    <div>施設名称検索 （例：仙台駅、東北電子専門学校）</div>

    <input type="text" id="pac-input"><button id="search">検索実行</button>
    <button id="clear">結果クリア</button>
    <div id="map"></div>
    <script>
        var geocoder
        var map
        function initMap() {

            geocoder = new google.maps.Geocoder()

            const SENDAI_BOUNDS = {
                north: 38.370938,
                south: 38.158939,
                west: 140.590667,
                east: 141.028747
            };
            map = new google.maps.Map(document.getElementById("map"), {
                center: { lat: 38.260260, lng: 140.879723 },
                zoom: 16,
                mapId: '6f69c882c9ca3496',
                latLngBounds: SENDAI_BOUNDS,
                strictBounds: false
            });
            // 予測変換
            const input = document.getElementById("pac-input");
            const autocomplete = new google.maps.places.Autocomplete(input);
            autocomplete.bindTo("bounds", map);
        }
        //ピンの表示機能
        function codeAddress() {
            geocoder.geocode({ address: input }, function (results, status) {
                if (status === 'OK' && results[0]) {

                    console.log(results[0].geometry.location);

                    var map = new google.maps.Map(target, {
                        center: results[0].geometry.location,
                        zoom: 16
                    });

                    var marker = new google.maps.Marker({
                        position: results[0].geometry.location,
                        map: map,
                        animation: google.maps.Animation.DROP
                    });

                } else {
                    //住所が存在しない場合の処理
                    alert('住所が正しくないか存在しません。');
                    target.style.display = 'none';
                }
            });
        }
    </script>
    <script
        src="https://maps.googleapis.com/maps/api/js?language=ja&region=JP&key=AIzaSyD_Gakxu8FkBHY5fuXiJWq7smmLFXjUctg&callback=initMap&libraries=places&v=weekly"
        async defer></script>
</body>

</html>